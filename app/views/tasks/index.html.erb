<p id="notice"><%= notice %></p>

<h1><%= t('view.Tasks') %></h1>

<%= form_with(scope: :task, url: tasks_path, local: true, method: :GET) do |form| %>
<%= form.label :タスク名 %>
<%= form.text_field :title %>
<%= form.label :ステータス %>
<%= form.select :status, [["未着手", "2"], ["着手中", "3"], ["完了", "4"]], include_blank: true %>
<%= form.submit "検索" %><%= button_to 'リセット', tasks_path %>
<% end %>

<table>
  <thead>
    <tr>
      <th scope = "col" ><%= link_to t('view.Title'), tasks_path(sort_title: "true") %></th>
      <th><%= t('view.Content')%></th>
      <th scope = "col" ><%= link_to t('view.Deadline'), tasks_path(sort_deadline: "true") %></th>
      <th><%= t('view.Status')%></th>
      <th><%= t('view.created_at')%></th>
      <th colspan="3"></th>
    </tr>    
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr class = "task_row">
        <td><%= task.title %></td>
        <td><%= task.content %></td>
        <td><%= task.deadline %></td>
        <td><%= task.status %></td>
        <td><%= task.created_at.strftime("%Y-%m-%d %H:%M") %></td>
        <td><%= link_to t('view.Show'), task %></td>
        <td><%= link_to t('view.Edit'), edit_task_path(task.id) %></td>
        <td><%= link_to t('view.Destroy'), task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to t('view.New_Task'), new_task_path %>
